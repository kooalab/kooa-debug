---
import { Image } from "astro:assets";
import Title from "../../Title.astro";
import calculez from "../../../assets/calculez-et-connectez.svg";
import design from "../../../assets/design-developpement.svg";
import lancement from "../../../assets/lancement.svg";
---

<section class="comment">
  <div class="container">
    <div class="heading">
      <Title
        align="left"
        mainTitle="3 Étapes Simples Vers"
        accent="Votre Succès"
        subTitle="Comment ca marche"
      />
      <p>
        Trois étapes clés pour concrétiser votre vision: de la planification
        stratégique au design personnalisé, jusqu'au lancement avec support
        continu.
      </p>
    </div>
    <div class="content-wrapper">
      <button class="actif">
        <div class="background"></div>
        <div class="number">1</div>
        <div class="content">
          <h3>Calculez & Connectez</h3><p>
            Explorez avec notre <span>configurateur</span>, puis planifiez un
            appel ou un mail pour une brève discussion.
          </p>
        </div>
      </button>
      <div class="img-wrapper">
        <Image
          class="blur-active"
          data-index="0"
          src={calculez}
          alt="Configurateur KOOA"
        />
      </div>
      <button>
        <div class="number">2</div>
        <div class="content">
          <h3>Design & Développement</h3><p>
            Collaborez étroitement avec nous pour façonner un site qui vous est
            entièrement dédié.
          </p>
        </div>
      </button>
      <div class="img-wrapper">
        <Image
          class="blur-active"
          data-index="0"
          src={design}
          alt="Configurateur KOOA"
        />
      </div>

      <button>
        <div class="number">3</div>
        <div class="content">
          <h3>Lancez & Détendez-Vous</h3><p>
            Démarrez votre site sur mesure et bénéficiez d'un support complet
            pendant 12 mois.
          </p>
        </div>
      </button>
      <div class="img-wrapper">
        <Image
          class="blur-active"
          data-index="0"
          src={lancement}
          alt="Configurateur KOOA"
        />
      </div>
    </div>
  </div>
</section>

<style lang="scss">
  @use "../../../styles/utils.scss" as *;

  .heading {
    display: flex;
    flex-direction: column;
    @include s(gap, 20, 20);
    align-items: center;

    p {
      text-align: center;
      max-width: 40ch;
      @include s(font-size, 16, 16);
    }
    @media screen and (min-width: 1000px) {
      flex-direction: row;
      align-items: flex-end;
      p {
        text-align: left;
        @include s(margin-bottom, -12, 12);
        max-width: 36ch;
      }
    }
  }

  .content-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    @include s(max-width, 550, 550);
    margin-inline: auto;
    .img-wrapper {
      max-width: 100%;
      height: auto;
      border-radius: calc(var(--border-radius) + 2px);
      border: 1px solid rgba(255, 255, 255, 0.03);

      overflow: hidden;
      img {
        width: 100%;
        height: auto;
        object-fit: cover;
        background-color: var(--clr-bg-700);
      }
    }
    @media screen and (min-width: 1000px) {
      align-items: flex-start;
      @include s(margin-top, 80, 80);
      max-width: unset;
      .background {
        position: absolute;
        inset: 0;
        background-color: var(--clr-bg-700);
        z-index: -1;
        border-radius: var(--border-radius);
        transform: translateY(0%);
        transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1);
      }
      .img-wrapper {
        position: absolute;
        width: 49.5%;
        height: 100%;
        right: 0;
        top: 50%;
        transform: translateY(-50%);

        img {
          height: 100%;
          width: 100%;
          object-fit: cover;
          scale: 1;
          opacity: 1;
          transition:
            scale 1s cubic-bezier(0.165, 0.84, 0.44, 1),
            filter 1s cubic-bezier(0.165, 0.84, 0.44, 1),
            opacity 1s cubic-bezier(0.165, 0.84, 0.44, 1);
          // transition:
          //   opacity 600ms cubic-bezier(0.5, 0, 0.15, 1),
          //   filter 600ms cubic-bezier(0.5, 0, 0.15, 1),
          //   scale 600ms cubic-bezier(0.5, 0, 0.15, 1);
          &.blur-active {
            filter: blur(2em);
            scale: 1.2;
            opacity: 0;
          }
        }
      }
      button {
        width: 49.35%;
        margin-block: 0;
        @include s(padding-block, 16, 24);
        @include s(padding-inline, 30, 30);
        color: var(--clr-text-700);
        align-items: flex-start;
        position: relative;
        pointer-events: all;
        @media (hover: hover) {
          &:hover {
            h3 {
              color: var(--clr-text-100);
            }
            .number {
              color: var(--clr-text-100);
              border-color: var(--clr-text-100);
            }
          }
        }
        .content {
          position: relative;
          transform: translateY(28%);
          transition: transform 1s cubic-bezier(0.165, 0.84, 0.44, 1);
          pointer-events: none;
        }
        .number {
          border-color: var(--clr-text-700);
          align-self: center;
          pointer-events: none;
          transition:
            color 1s cubic-bezier(0.165, 0.84, 0.44, 1),
            border-color 1s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        h3 {
          @include s(min-height, 37, 37);
          @include s(line-height, 37, 37);
          transition: color 1s cubic-bezier(0.165, 0.84, 0.44, 1);
          pointer-events: none;
        }
        p {
          opacity: 0;
          transition: opacity 1s cubic-bezier(0.165, 0.84, 0.44, 1);
          visibility: hidden;
        }

        &.actif {
          border-radius: var(--border-radius);
          color: var(--clr-text-100);
          .content {
            transform: translateY(0);
          }
          .number {
            border-color: var(--clr-text-100);
          }
          p {
            opacity: 1;
            visibility: visible;
          }
        }
      }
    }
  }
  button {
    @include s(margin-top, 80, 80);
    @include s(margin-bottom, 20, 20);
    @include s(padding-inline, 12, 12);
    display: flex;
    align-items: center;
    @include s(gap, 20, 24);
    @include s(font-size, 16, 16);
    pointer-events: none;
    .number {
      @include s(font-size, 13, 16);
      font-weight: 600;
      line-height: 0;

      @include s(min-width, 30, 37);
      @include s(min-height, 30, 37);
      border: 3px solid var(--clr-text-100);
      display: grid;
      place-items: center;
      border-radius: 9999px;
    }
    .content {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      @include s(gap, 4, 4);
      h3 {
        font-weight: 700;
        @include s(font-size, 17, 20);
      }
      p {
        text-align: left;
        line-height: 1.4;
        span {
          color: var(--clr-text-100);
        }
      }
    }
  }
</style>
